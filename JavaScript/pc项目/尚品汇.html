<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="stylesheet" href="./1.css">
  <link rel="stylesheet" href="./reset.css">
  <script src="./data.js"></script>
</head>

<body>
  <div class="outer">
    <!-- 顶部导航栏 -->
    <div class="top-banner">
      <div class="top-navigation">
        <div class="top">
          <div class="top-left">
            <strong>尚品汇欢迎您</strong>
            <span>请</span>
            <a href="#">登录</a>
            <a href="#">免费注册</a>
          </div>
          <div class="top-right">

            <a href="#">我的订单</a>

            <a href="#">我的购物车</a>

            <a href="#">我的尚品汇</a>

            <a href="#">尚品汇会员</a>

            <a href="#">企业采购</a>

            <a href="#">关注尚品汇</a>

            <a href="#">合作招聘</a>

            <a href="#">商家后台</a>

          </div>
        </div>
      </div>
      <!-- logo和搜素框 -->
      <div class="top-title">
        <div class="title">
          <div class="title-left">
            <img src="./images/Logo.png">
          </div>
          <div class="title-right">
            <input type="text">
            <button>搜索</button>
          </div>
        </div>
      </div>
    </div>
    <!-- 商品分类 -->
    <div class="goods-banner">
      <div class="goods-navigation">
        <div class="goods">
          <ul>
            <li>所有商品分类</li>
            <li><a href="#">服装城</a></li>
            <li><a href="#">美妆馆</a></li>
            <li><a href="#">尚品汇超市</a></li>
            <li><a href="#">全球购</a></li>
            <li><a href="#">闪购</a></li>
            <li><a href="#">团购</a></li>
            <li><a href="#">有趣</a></li>
            <li><a href="#">秒杀</a></li>
          </ul>
        </div>
      </div>
    </div>
    <!-- 商品类型 -->
    <div class="type-banner">
      <div class="type">
        <ul>
          <li>手机、数码、通讯/</li>
          <li>手机/</li>
          <li>Apple苹果/</li>
          <li>iphone 6S系类</li>
        </ul>
      </div>
    </div>
    <!-- 详情内容 -->
    <div class="details-banner">
      <div class="details">
        <div class="details-left">
          <div class="preview">
            <!-- 小图区域 -->
            <div class="show">
              <img src="./images/s1.png">
              <!-- 蒙版区域 -->
              <div class="mask"></div>
            </div>
            <!-- 大图区域 -->
            <div class="bigShow">
              <img src="./images/b1.png">
            </div>
          </div>
          <div class="slideshow">
            <p class="left">&lt;</p>
            <div class="cabinetOut">
              <ul class="cabinet">
                <!-- <li><img src="./images/s1.png"></li>
              <li><img src="./images/s2.png"></li>
              <li><img src="./images/s3.png"></li>
              <li><img src="./images/s1.png"></li>
              <li><img src="./images/s2.png"></li>
              <li><img src="./images/s3.png"></li>
              <li><img src="./images/s1.png"></li>
              <li><img src="./images/s2.png"></li>
              <li><img src="./images/s3.png"></li> -->
              </ul>
            </div>
            <p class="right">&gt</p>
          </div>
        </div>
        <div class="details-right">
          <div class="priceArea">
            <!-- <h5>Apple iPhone 6s（A1700）64G玫瑰金色 移动通信电信4G手机</h5>
          <p class="discounts">推荐选择下方[移动优惠购],手机套餐齐搞定,不用换号,每月还有花费返</p>
          <div class="priceDetail">
            <div class="price">
              <span>价&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;格</span>
              <span>￥<span>5299</span>元</span>
            </div>
            <div class="promotion">
              <p>促&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;销</p>
              <p><span>加价购</span>满999.00另加20.00元，或满1999.00另加30.00元，或满2999.00另加40.00元，即可在购物车换购热销商品</p>
            </div>
          </div>
          <div class="sustain">
            <span>支&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;持</span>
            <span>以旧换新，闲置手机回收 4G套餐超值抢 礼品购</span>
          </div>
          <div class="distribution">
            <span>配&nbsp;送&nbsp;至</span>
            <span>广东省 深圳市 宝安区</span>
          </div> -->
          </div>
          <div class="goodsChoose">

          </div>
          <div class="deploy">
            <!-- <dl>
            <dt>选择颜色</dt>
            <dd>金色</dd>
            <dd>银色</dd>
            <dd>黑色</dd>
          </dl>
          <dl>
            <dt>内存容量</dt>
            <dd>16G</dd>
            <dd>32G</dd>
            <dd>64G</dd>
            <dd>128G</dd>
          </dl>
          <dl>
            <dt>选择版本</dt>
            <dd>公开版</dd>
            <dd>移动版</dd>
          </dl>
          <dl>
            <dt>选择优惠</dt>
            <dd>官方标配</dd>
            <dd>移动优惠版</dd>
            <dd>电信优惠版</dd>
          </dl> -->
          </div>

          <div class="goodscount">
            <div class="count">
              <input type="text" value="1" readonly>
              <button class="plus">+</button>
              <button class="minus">-</button>
            </div>
            <button class="addCart">加入购物车</button>
          </div>
        </div>
      </div>
    </div>

    <!-- 商品详情展示页 -->
    <div class="productDetial">
      <aside class="aside">
        <div class="tabTitle">
          <h4 class="active">相关分类</h4>
          <h4>推荐品牌</h4>
        </div>
        <div class="tabContent">
          <div class="tab-pane active">
            <ul class='partList'>
              <li><a href="javascript:;"> 手机</a></li>
              <li><a href="javascript:;">手机壳</a></li>
              <li><a href="javascript:;">内存卡</a></li>
              <li><a href="javascript:;">Iphone配件</a></li>
              <li><a href="javascript:;">贴膜</a></li>
              <li><a href="javascript:;">手机耳机</a></li>
              <li><a href="javascript:;">移动电源</a></li>
              <li><a href="javascript:;">平板电脑</a></li>
            </ul>
            <ul class="goodList">
              <li>
                <div class="detailImg"><img src="./images/part01.png" alt=""></div>
                <h4>Apple苹果iPhone 6s (A1699)</h4>
                <p>¥6088.00</p>
                <div class="addCart"><a href="">加入购物车</a></div>
              </li>
              <li>
                <div class="detailImg"><img src="./images/part01.png" alt=""></div>
                <h4>Apple苹果iPhone 6s (A1699)</h4>
                <p>¥6088.00</p>
                <div class="addCart"><a href="">加入购物车</a></div>
              </li>
              <li>
                <div class="detailImg"><img src="./images/part01.png" alt=""></div>
                <h4>Apple苹果iPhone 6s (A1699)</h4>
                <p>¥6088.00</p>
                <div class="addCart"><a href="">加入购物车</a></div>
              </li>
              <li>
                <div class="detailImg"><img src="./images/part01.png" alt=""></div>
                <h4>Apple苹果iPhone 6s (A1699)</h4>
                <p>¥6088.00</p>
                <div class="addCart"><a href="">加入购物车</a></div>
              </li>
            </ul>
          </div>
          <div class="tab-pane">
            推荐品牌
          </div>
        </div>
      </aside>
      <div class="detail">
        <div class="fitting">
          <h4 class="kt">选择搭配</h4>
          <div class="good-suits">
            <div class="master">
              <img src="./images/l-m01.png" alt="">
              <p>¥5299</p>
              <i>+</i>
            </div>
            <ul class="suits">
              <li class="suitsItem">
                <img src="./images/dp01.png" alt="">
                <p>Feless费勒斯VR</p>
                <label>
                  <input type="checkbox" value="39">
                  <span>39</span>
                </label>
              </li>
              <li class="suitsItem">
                <img src="./images/dp02.png" alt="">
                <p>Feless费勒斯VR</p>
                <label>
                  <input type="checkbox" value="50">
                  <span>50</span>
                </label>
              </li>
              <li class="suitsItem">
                <img src="./images/dp03.png" alt="">
                <p>Feless费勒斯VR</p>
                <label>
                  <input type="checkbox" value="59">
                  <span>59</span>
                </label>
              </li>
              <li class="suitsItem">
                <img src="./images/dp04.png" alt="">
                <p>Feless费勒斯VR</p>
                <label>
                  <input type="checkbox" value="99">
                  <span>99</span>
                </label>
              </li>
            </ul>
            <div class="result">
              <div class="num">已选购0件商品</div>
              <p class="price-tit">套餐价</p>
              <p class="price">¥5299</p>
              <button class="addShopcar">加入购物车</button>
            </div>
          </div>
        </div>
        <div class="intro">
          <ul class="tab-wraped">
            <li class="active">
              <a href="###">商品介绍</a>
            </li>
            <li class="">
              <a href="###">规格与包装</a>
            </li>
            <li class="">
              <a href="###">售后保障</a>
            </li>
            <li class="">
              <a href="###">商品评价</a>
            </li>
            <li class="">
              <a href="###">手机社区</a>
            </li>
          </ul>
          <div class="tab-content">
            <div id="one" class="tab-pane active">
              <ul class="goods-intro">
                <li>分辨率：1920*1080(FHD)</li>
                <li>后置摄像头：1200万像素</li>
                <li>前置摄像头：500万像素</li>
                <li>核 数：其他</li>
                <li>频 率：以官网信息为准</li>
                <li>品牌： Apple</li>
                <li>商品名称：APPLEiPhone 6s Plus</li>
                <li>商品编号：1861098</li>
                <li>商品产地：中国大陆</li>
                <li>商品毛重：0.51kg</li>
                <li>热点：指纹识别，Apple Pay，金属机身，拍照神器</li>
                <li>系统：苹果（IOS）</li>
                <li>像素：1000-1600万品毛重：0.51kg</li>
                <li>机身内存：64GB</li>
              </ul>
              <div class="intro-detail">
                <img src="./images/intro01.png">
                <img src="./images/intro02.png">
                <img src="./images/intro03.png">
              </div>
            </div>
            <div id="two" class="tab-pane">规格与包装</div>
            <div id="three" class="tab-pane">售后保障</div>
            <div id="four" class="tab-pane">商品评价</div>
            <div id="five" class="tab-pane">手机社区</div>
          </div>

        </div>
      </div>
    </div>
    <!-- 侧边栏 -->
    <div class="toolBar">
      <!-- 侧边栏的内容 -->
      <div class="content"></div>
      <!-- 面包屑 -->
      <div class="menu"></div>
      <!-- 中间导航区域 -->
      <ul class="navList">
        <li>
          <i></i>
          <p>商品会员</p>
        </li>
        <li>
          <i></i>
          <p>购物车</p>
        </li>
        <li>
          <i></i>
          <p>我的关注</p>
        </li>
        <li>
          <i></i>
          <p>我的足迹</p>
        </li>
        <li>
          <i></i>
          <p>我的消息</p>
        </li>
        <li>
          <i></i>
          <p>咨询静哥</p>
        </li>
      </ul>
      <!-- 回到顶部 -->
      <div class="back"></div>
    </div>
  </div>
  <script src="./data.js"></script>
  <script>
    window.addEventListener("DOMContentLoaded", function () {
      //放大镜效果
      preview();
      function preview() {
        //获取包着大图小图的div
        var oPreview = document.querySelector('.details-banner .details .details-left .preview')
        //获取小图外的div
        var oShow = document.querySelector('.details-banner .details .details-left .preview .show');
        //获取蒙版的div
        var oMask = document.querySelector('.details-banner .details .details-left .preview .show .mask');
        //获取小图的img
        var oShowImg = document.querySelector('.details-banner .details .details-left .preview .show img');
        //获取大图外的div
        var oBigShow = document.querySelector('.details-banner .details .details-left .preview .bigShow');
        //获取大图的img
        var oBigShowImg = document.querySelector('.details-banner .details .details-left .preview .bigShow img');

        //初始化放大镜的初始图片
        //初始化数据中的第一张图
        var imgsrc = goodData.imgsrc;
        //给小图,大图设置初始化图片
        oShowImg.src = imgsrc[0].s;
        oBigShowImg.src = imgsrc[0].b;

        oPreview.onmousemove = function (e) {
          //把蒙版显示
          oMask.style.display = "block";
          //大图显示
          oBigShow.style.display = "block";
          //计算蒙版的位置公式是
          //鼠标实时的clientX-小图到视口边缘的位置-蒙版自身的一半
          var oSmallToWin = {
            x: oShowImg.getBoundingClientRect().left,
            y: oShowImg.getBoundingClientRect().top,
          }
          var oMaskWH = {
            width: oMask.offsetWidth,
            height: oMask.offsetHeight,
          }
          var oMaskLocation = {
            x: e.clientX - oSmallToWin.x - oMaskWH.width / 2,
            y: e.clientY - oSmallToWin.y - oMaskWH.height / 2,
          }
          //赋值之前判断临界值
          if (oMaskLocation.x <= 0) {
            oMaskLocation.x = 0;
          } else if (oMaskLocation.x > oShow.clientWidth - oMask.offsetWidth) {
            oMaskLocation.x = oShow.clientWidth - oMask.offsetWidth;
          }
          if (oMaskLocation.y <= 0) {
            oMaskLocation.y = 0;
          } else if (oMaskLocation.y > oShow.clientHeight - oMask.offsetHeight) {
            oMaskLocation.y = oShow.clientHeight - oMask.offsetHeight;
          }

          //赋值
          oMask.style.left = oMaskLocation.x + "px";
          oMask.style.top = oMaskLocation.y + "px";

          //计算小图，大图的比例
          //公式：蒙版移动的距离/蒙版可以移动的距离=大图移动的距离/大图可以移动的距离
          //大图可以移动的距离=蒙版移动的距离*大图移动的距离/蒙版可以移动的距离
          //比例scale=大图移动的距离/蒙版可以移动的距离
          //因为放大镜是正方形的，所以横竖的比例是一样的
          var bigImgAllMove = oBigShowImg.offsetWidth - oBigShow.clientWidth;
          var smallImgAllMove = oShow.clientWidth - oMask.offsetWidth;
          var scale = bigImgAllMove / smallImgAllMove;
          var bigImgMove = {
            x: oMaskLocation.x * scale,
            y: oMaskLocation.y * scale,
          }
          //赋值
          oBigShowImg.style.left = -bigImgMove.x + "px";
          oBigShowImg.style.top = -bigImgMove.y + "px";
        }
        oPreview.onmouseleave = function () {
          oMask.style.display = "none";
          oBigShow.style.display = "none";
        }
      }

      //缩略图效果
      thumbnail();
      function thumbnail() {
        //获取ul
        var oList = document.querySelector('.details-banner .details .details-left .slideshow .cabinetOut .cabinet')
        //根据数据生成缩略图结构
        var imgsrc = goodData.imgsrc;
        //遍历imgsrc生成li和img,并插入到ul中
        imgsrc.forEach(function (item, index) {
          //生成一个li
          var newLi = document.createElement("li");
          //生成一个img
          var newImg = new Image();
          newImg.src = item.s;
          //把img插入到li中
          newLi.appendChild(newImg);
          oList.appendChild(newLi);
        })
        var oLeft = document.querySelector('.details-banner .details .details-left .slideshow .left');
        var oRight = document.querySelector('.details-banner .details .details-left .slideshow .right');
        var oListLis = document.querySelectorAll('.details-banner .details .details-left .slideshow .cabinetOut .cabinet li');
        //每次走两张，计算出两张的长度
        var everyMove = 2 * oListLis[0].offsetWidth;
        //定义一个初始累加值
        var location = 0;
        //求出总共能走的距离
        var allMove = (oListLis.length - 5) * oListLis[0].offsetWidth;
        oRight.onclick = function () {
          //每次走之前做一个判断
          //判断剩余的距离够不够everyMove，如果不够，则直接走到末尾
          if (allMove - location > everyMove) {
            location += everyMove;
          } else {
            location = allMove;
          }
          oList.style.transform = "translateX(" + -location + "px)"
        }

        oLeft.onclick = function () {
          //每次走之前做一个判断
          //判断剩余的距离够不够everyMove，如果不够，则直接走到末尾
          if (location > everyMove) {
            location -= everyMove;
          } else {
            location = 0;
          }
          oList.style.transform = "translateX(" + -location + "px)"
        }
      }

      //缩略图点击
      thumbnailClick();
      function thumbnailClick() {
        //遍历缩略图里所有的img，然后绑定点击事件，然后给放大镜里的图片更改成对应的
        var oLiImgs = document.querySelectorAll('.details-banner .details .details-left .slideshow .cabinetOut .cabinet li img');
        //获取小图的图片
        var oThumbnailSmallImg = document.querySelector('.details-banner .details .details-left .preview .show img');
        var oThumbnailBigImg = document.querySelector('.details-banner .details .details-left .preview .bigShow img')
        var imgsrc = goodData.imgsrc;
        oLiImgs.forEach(function (item, index) {
          item.onclick = function () {
            //获取当前的img的src,设置给放大镜的小图
            //因为放大镜中的小图和缩略图中的图片是同一张图片，所以src地址是一样的，所以就直接赋值，而大图不是
            oThumbnailSmallImg.src = item.src;
            //index代表的是小图的第几个，然后根据数据得到对应下标的大图
            oThumbnailBigImg.src = imgsrc[index].b;
          }
        })
      }

      //详细数据
      detailData();
      function detailData() {
        var oPriceArea = document.querySelector('.details-banner .details .details-right .priceArea');
        var goodsDetail = goodData.goodsDetail;
        var str = '<h5>' + goodsDetail.title + '</h5>\
        <p class="discounts">' + goodsDetail.recommend + '</p>\
          <div class="priceDetail">\
            <div class="price">\
              <span>价&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;格</span>\
              <span>￥<span>'+ goodsDetail.price + '</span>元</span>\
            </div>\
            <div class="promotion">\
              <p>促&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;销</p>\
              <p><span>'+ goodsDetail.promoteSales.type + '</span>' + goodsDetail.promoteSales.content + '</p>\
            </div>\
          </div>\
          <div class="sustain">\
            <span>支&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;持</span>\
            <span>'+ goodsDetail.support + '</span>\
          </div>\
          <div class="distribution">\
            <span>配&nbsp;送&nbsp;至</span>\
            <span>'+ goodsDetail.address + '</span>\
          </div>'
        oPriceArea.innerHTML = str;
      }


      //商品选择
      chooseData();
      function chooseData() {
        var oDeploy = document.querySelector('.details-banner .details .details-right .deploy');
        //数据
        var crumbData = goodData.goodsDetail.crumbData;
        //根据数据生成dl
        crumbData.forEach(function (item, index) {
          //首先每次遍历数据都要生成一个dl
          var newDl = document.createElement("dl");
          //每个dl中只有一个dt，所以可以生成一个新的dt,并插入到dl中
          var newDt = document.createElement("dt");
          //给dt插入内容
          newDt.innerHTML = item.title;
          //把dt插入到dl中
          newDl.appendChild(newDt)
          //遍历数据中的data,生成对应的dd
          item.data.forEach(function (item, index) {
            var newDd = document.createElement("dd");
            newDd.innerHTML = item.type;
            //创建dd的时候把当前dd对应的修改的价格，保存到自定义属性上
            newDd.dataset.price = item.changePrice;
            newDl.appendChild(newDd);
          })
          //把dl插入到页面中
          oDeploy.appendChild(newDl);
        })
      }

      //商品筛选功能
      choose();
      function choose() {
        var oDl = document.querySelectorAll('.details-banner .details .details-right .deploy dl');
        var oGoodsChoose = document.querySelector('.details-banner .details .details-right .goodsChoose');
        //创建一个长度为4的，值都是null的数组
        //碰到需要创建一个有序的储存结构的时候，就要想到数组
        var arr = new Array(4);
        /* 
        ES6为Array增加了fill()函数，使用指定的元素填充数组，其实就是用默认内容初始化数组。
        
        该函数有三个参数。
        1.value：填充值。
  
        2.start：填充起始位置，可以省略。
  
        3.end：填充结束位置，可以省略，实际结束位置是end - 1。 
        */
        arr.fill(null);

        //遍历每一个dl
        oDl.forEach(function (item, index) {
          //每一个dl，都是一个独立的区域
          //获取当前dl中所有的dd
          var oDlDd = item.querySelectorAll("dd");
          //给当前的dd绑定点击事件
          oDlDd.forEach(function (item, i) {
            item.onclick = function () {
              //先清空当前dl的dd的所有的样式
              oDlDd.forEach(function (item, index) {
                item.style.color = "#666";
              })
              item.style.color = "#FF0000";
              //当点击的时候，开始生成mark标签
              //但是因为mark标签展示的数据是按照顺序来的，所以需要依赖数组储存，再根据数组生成元素
              //点击的时候，获取当前dd所在的dl的下标
              console.log(index);
              //给对应数组的下标放入当前点击的dd
              arr[index] = this;

              //每次遍历数组生成mark之前，把已经存在的mark清空，因为我们要重新加载
              oGoodsChoose.innerHTML = "";
              //每次点击完改变数组，我们根据数组的值，进行生成mark标签
              arr.forEach(function (item, index) {
                //判断item的每一项是否为null
                if (item) {
                  console.log(arr);
                  //生成mark标签
                  var oMark = document.createElement('mark');
                  oMark.innerHTML = item.innerHTML;
                  //创建一个删除按钮
                  var oA = document.createElement("a");
                  oA.innerHTML = "×"
                  //让oA保存当前数据在数组中的下标
                  //dataset 获取自定义属性值的使用
                  oA.dataset.index = index;
                  oMark.appendChild(oA);
                  oGoodsChoose.appendChild(oMark);
                }
              })
              //点击之后，绑定删除，并完成删除功能
              //获取所有的删除按钮
              var oDele = document.querySelectorAll(".details-banner .details .details-right .goodsChoose mark a");
              oDele.forEach(function (item, index) {
                item.onclick = function () {
                  //先删除当前的mark标签
                  item.parentNode.remove();
                  //还要删除数组中保存的元素
                  //删除按钮上保存有当前内容对应数组的下标
                  arr[item.dataset.index] = null;
                  //删除mark之后，把对应的dd的颜色恢复默认第一个显示
                  //把当前mark对应的dl中dd全部清空，然后再给第一个添加即可
                  var oDd = oDl[item.dataset.index].querySelectorAll("dd");
                  oDd.forEach(function (item, index) {
                    item.style.color = "#666";
                  })
                  oDd[0].style.color = "#FF0000";
                  //删除的时候也要改变价钱
                  //其实删除的时候，也是对数组进行操作，所以我们任然使用数组中还剩余的dd来计算价钱
                  priceChange(arr);
                }
              })
              //当点击之后计算价钱
              //点击的时候改变的是数组，数组中保存的是你选择的结构
              //我们可以根据数组求出改变的价钱
              priceChange(arr);
            }
          })
        })
      }


      function priceChange(arr) {
        //删除的时候也要改变价格
        //其实删除的时候，也是对数组进行操作，所以我们仍然使用数组中还剩余的dd来计算价钱
        var basePrice = goodData.goodsDetail.price;
        //获取数量的标签
        var oIpt = document.querySelector(".details-banner .details .details-right .goodscount .count input");
        var oPriceDetail = document.querySelector(".details-banner .details .details-right .priceArea .priceDetail .price span:nth-child(2) span");
        //遍历数组，把获取的dd元素上保存的价钱添加到basePrice上
        arr.forEach(function (item, index) {
          if (item) {
            basePrice += +item.dataset.price;
          }
        })
        oPriceDetail.innerHTML = basePrice * oIpt.value;
        console.log(basePrice);
      }
      //数量改变
      num();
      function num() {
        var count = 1;
        var oPlus = document.querySelector('.details-banner .details .details-right .goodscount .count .plus');
        var oMins = document.querySelector('.details-banner .details .details-right .goodscount .count .minus');
        var oIpt = document.querySelector('.details-banner .details .details-right .goodscount .count input');
        var oPriceDetail = document.querySelector(".details-banner .details .details-right .priceArea .priceDetail .price span:nth-child(2) span");
        oPlus.onclick = function () {
          count++;
          oIpt.value = count;
          //每次点击的时候，获取当前的显示的价格
          var nowPrice = +oPriceDetail.innerHTML;
          var totlePrice = nowPrice / (count - 1) * count;
          oPriceDetail.innerHTML = totlePrice;
        }
        oMins.onclick = function () {
          count--;
          if (count < 1) {
            count = 1;
            return;
          }
          oIpt.value = count;
          var nowPrice = +oPriceDetail.innerHTML;
          var totlePrice = nowPrice / (count + 1) * count;
          oPriceDetail.innerHTML = totlePrice;
        }
      }

      //面向对象tab切换
      //Tab切换一般要的是 标题的集合 和内容的集合
      function Tab(oTitles, oCons) {
        //把一些变量放在this 也就是实例化对象上， 方便在原型对象的方法中获取当前的变量
        this.oTitles = oTitles;
        this.oCons = oCons;
        var _this = this;
        this.oTitles.forEach(function (item, index) {
          item.onclick = function () {
            //所有tab切换的标题点击以后，执行的动作是一致的 所以可以把动作放在原型对象上
            //在这里 index就是对应当前点击元素的下标
            _this.click(index);
          }
        })
      }
      Tab.prototype.click = function (index) {
        var _this = this;
        //先清空所有样式
        this.oTitles.forEach(function (item, index) {
          item.classList.remove("active");
          _this.oCons[index].classList.remove("active");
        })

        //给当前点击的元素添加
        this.oTitles[index].classList.add("active")
        this.oCons[index].classList.add("active")

      }


      //侧边栏tab
      asideTab()

      function asideTab() {
        var oTitles = document.querySelectorAll('.tabTitle h4');
        var oCons = document.querySelectorAll('.tabContent .tab-pane');
        new Tab(oTitles, oCons)
      }


      //内容Tab
      conTab();

      function conTab() {
        var oTitles = document.querySelectorAll('.tab-wraped li');
        var oCons = document.querySelectorAll('.tab-content .tab-pane');
        new Tab(oTitles, oCons)
      }


      //侧边栏
      asideClick();

      function asideClick() {
        var oMenu = document.querySelector('.toolBar .menu');
        var oToolBar = document.querySelector('.toolBar');
        var flag = false; //默认关闭
        oMenu.onclick = function () {
          if (flag) {
            oToolBar.style.right = "-294px";
          } else {
            oToolBar.style.right = 0;
          }
          flag = !flag;
        }
      }
    })
  </script>
</body>

</html>